# מדריך שימוש במערכת האדמין

## סקירה כללית

מערכת האדמין מאפשרת לך לנהל את האתר שלך ללא צורך לעבוד עם קוד. המערכת כוללת:

- **אימות מאובטח** - התחברות עם אימייל וסיסמה (מוצפנת עם bcrypt)
- **ניהול מחירים** - ערוך חבילות מחירים בקלות
- **אנליטיקס** - צפה בסטטיסטיקות אתר
- **ניהול הזמנות** - מעקב אחר הזמנות
- **ניהול לידים** - צפה בפניות יצירת קשר וצעדי מחיר
- **ניהול ביקורות** - אשר או דחה ביקורות לפני פרסום

## התחלת עבודה

### 1. הרשמה ראשונית

בפעם הראשונה שתגיע למערכת:

1. גש ל-`/admin/login`
2. אם אין עדיין אדמין במערכת, תראה קישור "צור חשבון אדמין ראשון"
3. לחץ על הקישור או גש ל-`/admin/register`
4. מלא את הפרטים:
   - **שם מלא** - השם שלך
   - **אימייל** - כתובת האימייל שלך (תשמש להתחברות)
   - **סיסמה** - סיסמה חזקה (לפחות 8 תווים)
   - **אימות סיסמה** - הזן את הסיסמה שוב

5. לחץ "צור חשבון אדמין"

**חשוב:** ניתן ליצור רק חשבון אדמין אחד באופן ישיר. לאחר מכן, ההרשמה תיחסם.

### 2. התחברות

1. גש ל-`/admin/login`
2. הזן את האימייל והסיסמה
3. לחץ "התחבר"
4. תועבר לדשבורד האדמין

### 3. אתחול מסד הנתונים

לפני שימוש ראשון, יש להריץ את הסקריפטים הבאים:

```bash
# הרץ את initDatabase כדי ליצור את כל הטבלאות
# זה יתבצע אוטומטית בהתחלת השרת, אבל אפשר גם להריץ ידנית
```

### 4. העברת מחירים מ-JSON למסד הנתונים

כדי להעביר את המחירים הקיימים מ-`data/packages.json` למסד הנתונים:

**אופציה 1: דרך הטרמינל (מומלץ)**
```bash
# שלח POST request ל-API
curl -X POST http://localhost:3000/api/admin/migrate-packages
```

**אופציה 2: דרך הדפדפן**
1. פתח את כלי הפיתוח (F12)
2. עבור ל-Console
3. הרץ:
```javascript
fetch('/api/admin/migrate-packages', { method: 'POST' })
  .then(r => r.json())
  .then(console.log)
```

זה יבצע העתקה חד-פעמית של כל החבילות למסד הנתונים.

## שימוש בממשק האדמין

### דשבורד ראשי

לאחר ההתחברות, תראה דשבורד עם מספר טאבים:

#### 📊 אנליטיקס
- צפייה בסטטיסטיקות אתר
- מעקב אחר ביקורים בדפים
- צפייה בטמפלייטים פופולריים

#### 💰 הזמנות
- רשימת כל ההזמנות
- פרטי הזמנה (חבילה, סכום, סטטוס)
- פרטי לקוח

#### 👥 לידים
- פניות יצירת קשר
- בקשות לצעדי מחיר
- ניהול סטטוס לידים

#### ⭐ ביקורות
- אישור/דחיית ביקורות
- עריכת ביקורות
- ניהול תצוגת ביקורות באתר

#### 💰 מחירים
**זה החלק המרכזי שביקשת!**

##### צפייה בחבילות
- כל החבילות מוצגות בכרטיסים נפרדים
- אפשר לראות את כל התכונות והמחיר

##### עריכת חבילה
1. לחץ על "ערוך חבילה" בחבילה שברצונך לערוך
2. נפתח מודאל עריכה עם כל הפרטים:

**פרטים שניתן לערוך:**
- **שם החבילה** - למשל "חבילה בסיסית"
- **מחיר** - המחיר במספרים (ללא סימנים)
- **מטבע** - ILS או USD וכו'
- **תיאור** - תיאור קצר של החבילה
- **תכונות** - רשימת התכונות:
  - לחץ על "+" להוספת תכונה חדשה
  - ערוך כל תכונה בנפרד
  - לחץ "מחק" להסרת תכונה
- **סמן כפופולרית** - סמן את החבילה הכי מומלצת

3. לחץ "שמור שינויים"
4. השינויים יישמרו מיד במסד הנתונים ויוצגו באתר

##### עצות לעריכת מחירים
- **שמור את המחירים עדכניים** - עדכן מחירים לפי שינויים בשוק
- **הבלט חבילה אחת כפופולרית** - זה עוזר ללקוחות לבחור
- **הוסף/הסר תכונות בקלות** - התאם את החבילות לשירותים שאתה מציע
- **השתמש בתיאורים ברורים** - עזור ללקוחות להבין מה כלול

## אבטחה

### הצפנת סיסמאות
- כל הסיסמאות מוצפנות עם bcrypt
- אף אחד (כולל אתה!) לא יכול לראות את הסיסמה המקורית
- השתמש בסיסמה חזקה!

### Session Management
- התחברות תקפה ל-7 ימים
- לאחר מכן תצטרך להתחבר שוב
- הקוקיז מוצפנים ומאובטחים

### הרשאות
- רק משתמשים מחוברים יכולים לגשת לדשבורד
- רק אדמינים יכולים לערוך מחירים
- כל הפעולות מאומתות בצד השרת

## פתרון בעיות

### לא יכול להתחבר
- בדוק שהאימייל והסיסמה נכונים
- נסה לרענן את הדף
- נקה cookies ונסה שוב
- אם שכחת את הסיסמה, תצטרך ליצור מחדש את המשתמש (פנה למפתח)

### מחירים לא מעודכנים
- רענן את הדף
- בדוק שלחצת "שמור שינויים"
- בדוק את הקונסול לשגיאות

### לא רואה את הטאב "מחירים"
- בדוק שאתה מחובר כאדמין
- רענן את הדף
- נקה את ה-cache של הדפדפן

## טכנולוגיות

המערכת בנויה על:
- **Next.js 16** - פריימוורק React
- **Turso (LibSQL)** - מסד נתונים
- **bcrypt** - הצפנת סיסמאות
- **TypeScript** - קוד מסוג
- **Tailwind CSS** - עיצוב

## תמיכה

יש בעיה? שאלה? צור קשר עם המפתח!
